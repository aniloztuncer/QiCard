<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>QiBot</title>

<script type="text/javascript" charset="utf-8">
  (function (g, e, n, es, ys) {
    g['_genesysJs'] = e;
    g[e] = g[e] || function () {
      (g[e].q = g[e].q || []).push(arguments)
    };
    g[e].t = 1 * new Date();
    g[e].c = es;
    ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
  })(window, 'Genesys', 'https://apps.mypurecloud.de/genesys-bootstrap/genesys.min.js', {
    environment: 'prod-euc1',
    //English
    //deploymentId: '8830f3ca-dc62-4210-8ad6-a788284e4968'
    //Arabic Paragraph
    deploymentId: '21d8b1f2-0ff4-4e4b-947b-ed49de2fd36f'
  });
</script>
  
</head>
<body>
  <!-- Genesys widget will load here -->
  <div id="genesys-support-center"></div>
  
  <script>
    function showMessage() {
      console.log('Button was clicked!');
      alert('Thanks for clicking!');
    }
  </script>

  <script>
      Genesys("subscribe", "Messenger.ready", function () {
        alert('yeni script');
        // This fires EVERY TIME a bot or agent sends a message
        Genesys("subscribe", "MessagingService.messagesReceived", function (response) {
          alert('messages received event');
          // Delay to allow Genesys to render the message
          setTimeout(() => {
            document.querySelectorAll("a").forEach(link => {
              const url = link.href;
              alert('url aldım: ' + url);
              if (url.includes("youtube.com/embed")) {
                alert('urlin içinde youtube var');
                const match = url.match(/embed\/+([^?]+)/);
                alert('matchi aldim: ' + match);
                if (!match) return;
      
                const videoId = match[1];
                alert('videoId: ' + videoId);
                const iframe = document.createElement("iframe");
                iframe.width = "300";
                iframe.height = "180";
                iframe.src = `https://www.youtube.com/embed/${videoId}`;
                iframe.frameBorder = "0";
                iframe.allowFullscreen = true;
      
                link.replaceWith(iframe);
              }
            });
          }, 50); // Give the widget time to update DOM
        });
      
      });
      </script>

  


</body>
</html>
